---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ProjectCard from "../../components/ProjectCard.astro";
import SectionTitle from "../../components/SectionTitle.astro";

// Projects data
const projects = [
  {
    title: "Wrap Around House",
    location: "Cambridge",
    category: "Residential",
    year: "2023",
    image:
      "/images/bba-018-wrap_around_house-complete-copyright_msap-16-900x900.jpg",
    slug: "wrap-around-house",
    type: "homes",
  },
  {
    title: "Copper House",
    location: "Cambridge",
    category: "Residential",
    year: "2024",
    image: "/images/copper.jpg",
    slug: "copper-house",
    type: "homes",
  },
  {
    title: "Western Park",
    location: "Leicester",
    category: "Cultural",
    year: "2025",
    image: "/images/westernpark.jpg",
    slug: "western-park",
    type: "places",
  },
  {
    title: "Test 4",
    location: "Test 5",
    category: "Test 6",
    year: "2022",
    image: "images/placeholder.jpg",
    slug: "riverside-gallery",
    type: "places",
  },
  {
    title: "Test 10",
    location: "Test 11",
    category: "Test 12",
    year: "2022",
    image: "/images/placeholder.jpg",
    slug: "urban-apartment",
    type: "homes",
  },
  {
    title: "Test 13",
    location: "Test 14",
    category: "Test 15",
    year: "2021",
    image: "/images/placeholder.jpg",
    slug: "community-hub",
    type: "places",
  },
  {
    title: "Test 16",
    location: "Test 17",
    category: "Test 18",
    year: "2022",
    image: "/images/placeholder.jpg",
    slug: "garden-studio",
    type: "homes",
  },
  {
    title: "Test 19",
    location: "Test 20",
    category: "Test 21",
    year: "2021",
    image: "/images/placeholder.jpg",
    slug: "timber-house",
    type: "homes",
  },
  {
    title: "Test 22",
    location: "Test 23",
    category: "Test 24",
    year: "2020",
    image: "/images/placeholder.jpg",
    slug: "eco-house",
    type: "homes",
  },
  {
    title: "Test 25",
    location: "Test 26",
    category: "Test 27",
    year: "2021",
    image: "images/placeholder.jpg",
    slug: "office-renovation",
    type: "places",
  },
  {
    title: "Test 28",
    location: "Test 29",
    category: "Test 30",
    year: "2022",
    image: "/images/placeholder.jpg",
    slug: "riverside-gallery",
    type: "places",
  },
  {
    title: "Test 31",
    location: "Test 32",
    category: "Test 33",
    year: "2022",
    image: "/images/placeholder.jpg",
    slug: "urban-apartment",
    type: "homes",
  },
];
---

<BaseLayout title="Projects">
  <section class="py-20 px-6 md:px-12">
    <div class="container mx-auto">
      <SectionTitle
        title="Our Projects"
        subtitle="A selection of our work across residential and public spaces."
      />
      <!-- hidden radio buttons used for filtering -->
      <input
        type="radio"
        id="homes"
        name="project-filter"
        class="sr-only"
        checked
      />
      <input type="radio" id="both" name="project-filter" class="sr-only" />
      <input type="radio" id="places" name="project-filter" class="sr-only" />

      <div class="toggle-wrapper flex md:justify-end mb-10 relative md:ml-2">
        <div class="project-slider relative w-72 h-3 bg-gray-300 rounded-full">
          <!-- movable knob -->
          <div
            class="slider-thumb absolute top-1/2 left-0 h-6 w-6 bg-black rounded-full -translate-y-1/2 transition-[left] duration-300"
          >
          </div>

          <!-- click zones (visually hidden text for a11y) -->
          <label
            for="homes"
            class="absolute left-0 top-0 w-1/3 h-full cursor-pointer"
            ><span class="sr-only">Homes</span></label
          >
          <label
            for="both"
            class="absolute left-1/3 top-0 w-1/3 h-full cursor-pointer"
            ><span class="sr-only">Homes &amp; Places</span></label
          >
          <label
            for="places"
            class="absolute left-2/3 top-0 w-1/3 h-full cursor-pointer"
            ><span class="sr-only">Places</span></label
          >
        </div>
      </div>

      <h3 class="current-heading text-2xl font-light mb-8">
        <span class="homes-heading">Homes</span>
        <span class="both-heading">Homes &amp; Places</span>
        <span class="places-heading">Places</span>
      </h3>
      <div
        class="project-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12"
      >
        {
          projects.map((project) => (
            <div class="card" data-type={project.type}>
              <ProjectCard {...project} />
            </div>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* --- Project filtering --- */
  #homes:checked ~ .project-grid .card[data-type="places"] {
    display: none;
  }
  #places:checked ~ .project-grid .card[data-type="homes"] {
    display: none;
  }

  /* --- Slider knob movement --- */
  .slider-thumb {
    transform: translate(-50%, -50%);
  }
  #homes:checked ~ .toggle-wrapper .slider-thumb {
    left: 0%;
  }
  #both:checked ~ .toggle-wrapper .slider-thumb {
    left: 50%;
  }
  #places:checked ~ .toggle-wrapper .slider-thumb {
    left: 100%;
  }

  /* --- Dynamic heading text --- */
  .current-heading span {
    display: none;
  }
  #homes:checked ~ .current-heading .homes-heading {
    display: inline;
  }
  #both:checked ~ .current-heading .both-heading {
    display: inline;
  }
  #places:checked ~ .current-heading .places-heading {
    display: inline;
  }
</style>
